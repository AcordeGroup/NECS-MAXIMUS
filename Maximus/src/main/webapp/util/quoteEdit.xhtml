<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/WEB-INF/include/admin/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{maximusBundle.AppName}"></h:outputText>
        </ui:define>
        <ui:define name="menu">
            <!-- Menu here. Also a layout and a way to log a user out -->
             <ui:include src="#{createQuoteController.appMenu()}" />
        </ui:define>
        <ui:define name="body">
            <h:form id="form">
                <p:panel header="#{maximusBundle.edit_request_label}" id="panelRequest">
                    <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true"/>
                    <h:panelGrid columns="2" style="width: 100%; vertical-align: top;" >
                        <h:panelGrid columns="2" style="text-align: left">
                            <h:outputText value="#{maximusBundle.CustomerHeading} *" />
                            <h:selectOneMenu id="customer" value="#{editQuoteController.quote.idContact}" converter="customerConverter" style="width:255px;">
                                <f:selectItem itemLabel="#{maximusBundle.SelectOneMessage}"/>
                                <f:selectItems value="#{editQuoteController.customerList}"
                                               var="item"
                                               itemValue="#{item}"
                                               itemLabel="#{item.companyName.companyName}"
                                               />
                                <p:ajax update="panelRequest" /> 
                            </h:selectOneMenu>

                        </h:panelGrid>

                        <h:panelGrid style="text-align: center; vertical-align: top;   background-color: #C2C7C1; margin-right: 5px; position: relative; left: 210px;" class="ovalo"> 
                            <div style="text-align: right; vertical-align: middle; ">
                                <h:outputText value="#{maximusBundle.id_quote } #{viewQuoteController.quote.idQuote}" />
                            </div>
                        </h:panelGrid>
                    </h:panelGrid>
                    <p:outputPanel   rendered="#{editQuoteController.quote.idContact != null}">
                        <h:panelGrid columns="2" style="text-align: left">

                            <h:panelGrid columns="2" style="text-align: left">
                                <h:outputText value="#{maximusBundle.label_address}" />
                                <p:inputText value="#{editQuoteController.quote.idContact.companyName.companyAddress}" disabled="true" style="margin-left: 15px; width:250px;"/>



                                <h:outputText value="#{maximusBundle.label_country}" />
                                <p:inputText value="#{editQuoteController.quote.idContact.companyName.country}" disabled="true" style="margin-left: 15px; width:250px;" />



                                <h:outputText value="#{maximusBundle.label_contact}" />
                                <p:inputText value="#{editQuoteController.quote.contact}" style="margin-left: 15px; width:250px;"/>

                                <h:outputText value="#{maximusBundle.label_email}" />
                                <p:inputText value="#{editQuoteController.quote.email}" style="margin-left: 15px; width:250px;" />

                            </h:panelGrid>
                            <h:panelGrid columns="2" style="text-align: left; vertical-align: top;" rendered="#{editQuoteController.quote.idContact != null}">
                                <h:outputText value="#{maximusBundle.label_shipping_to}"  style="margin-left: 10px; vertical-align: top;" />
                                <p:inputTextarea value="#{editQuoteController.quote.shipping_to}"  style="width:300px; margin-left: 10px; "/>
                                <h:outputText value="#{maximusBundle.label_include_shipping}"  style="margin-left: 10px;"  />
                                <h:selectOneMenu id="cost" value="#{editQuoteController.includeShipping}"  style="width:308px; margin-left: 10px;">
                                    <f:selectItem itemLabel="#{maximusBundle.No}" itemValue="No"/>
                                    <f:selectItem itemLabel="#{maximusBundle.Yes_price_item}" itemValue="#{maximusBundle.Yes_price_item}"/>
                                    <f:selectItem itemLabel="#{maximusBundle.Yes_separate}" itemValue="#{maximusBundle.Yes_separate}"/>
                                    <p:ajax update="datalistProduct" /> 
                                </h:selectOneMenu>

                            </h:panelGrid>
                        </h:panelGrid>
                        <p:spacer />
                        <p:separator />
                        <p:outputPanel style="text-align: right; width: 100% ">
                            <p:commandButton  type="button" id="buttonAddPart" value="#{maximusBundle.add_part_button}" onclick="PF('dialogPart').show()" ajax="true" oncomplete="#{editQuoteController.reset()}" />
                        </p:outputPanel>
                        <p:spacer />
                        <p:dataTable id="datalistProduct"
                                     value="#{editQuoteController.partListHas}"
                                     var="item"
                                     emptyMessage="list Empty"
                                     rendered="#{editQuoteController.partListHas != null}"
                                     >

                            <p:column  style="width : 100px">
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.CreateProductCostTitle_partNumber}"/>
                                </f:facet>
                                <h:outputText value="#{item.product.partNumber}">
                                    <f:convertDateTime pattern="MM/dd/yyyy" />
                                </h:outputText>
                            </p:column>

                            <p:column  style="width : 170px" >
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.CreateProductTitle_description}"/>
                                </f:facet>
                                <h:outputText value="#{item.product.description}" rendered="#{item.product.partNumber != '555555'}"/>
                                <h:outputText value="#{item.observation}" rendered="#{item.product.partNumber == '555555'}"/>
                            </p:column>

                            <p:column style="width : 93px">
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.condition_label}"/>
                                </f:facet>
                                <p:selectOneButton value="#{item.condition}" required="true" requiredMessage="#{maximusBundle.message_condition_select}" style="width: 120px; height: 25px">
                                    <f:selectItem itemLabel="#{maximusBundle.ref}" itemValue="#{maximusBundle.ref}" class="buttonCondition"  />
                                    <f:selectItem itemLabel="#{maximusBundle.new}" itemValue="#{maximusBundle.new}" class="buttonCondition" />
                                </p:selectOneButton>
                            </p:column>

                            <p:column  style="width : 50px">
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.qty_label}"/>
                                </f:facet>
                                <p:spinner id="basic" value="#{item.qtyRequested}" size="2"  min="0" required="true" requiredMessage="#{maximusBundle.message_qty_product}">
                                    <p:ajax update=":form:datalistProduct:extended" listener="#{editQuoteController.addExtended(item)}" />
                                </p:spinner>
                            </p:column>

                            <p:column  style="width : 55px" rendered="#{editQuoteController.userManagedBean.type != 'Sales'}">
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.qty_found_label}"/>
                                </f:facet>
                                <p:spinner value="#{item.qtyFound}" size="2"  min="0" required="true" requiredMessage="#{maximusBundle.message_qty_product}"/>
                            </p:column>

                            <p:column  style="width : 68px">
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.target_price_label}"/>
                                </f:facet>
                                <p:inputText converter="javax.faces.Double" converterMessage="#{maximusBundlemessage_only_numbers}" value="#{item.customerTargetPrice}" size="7">
                                    <p:ajax update=":form:datalistProduct:extended" listener="#{editQuoteController.addExtended(item)}" />
                                </p:inputText>

                            </p:column>

                            <p:column  style="width : 68px" rendered="#{editQuoteController.userManagedBean.type != 'Sales'}">
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.EditHasTitle_suggestedSalesPrice}"/>
                                </f:facet>
                                <p:inputText converter="javax.faces.Double" converterMessage="#{maximusBundlemessage_only_numbers}" value="#{item.suggestedSalesPrice}" size="7"/>

                            </p:column>

                            <p:column style="width : 68px">
                                <f:facet name="header">
                                    <h:outputText value="Extended"/>
                                </f:facet>
                                <p:inputText id="extended" converter="javax.faces.Double" converterMessage="#{maximusBundlemessage_only_numbers}" value="#{item.extended}"  size="7"/>
                            </p:column>

                            <p:column style="width : 68px" rendered="#{editQuoteController.includeShipping == maximusBundle.Yes_price_item and userManagedBean.type != 'Sales' }">
                                <f:facet name="header">
                                    <h:outputText value="#{maximusBundle.shipping_cost_label}"/>
                                </f:facet>
                                <p:inputText converter="javax.faces.Double" converterMessage="#{maximusBundlemessage_only_numbers}" value="#{item.shipping_cost}" required="true" requiredMessage="#{maximusBundle.message_shipping_cost_for_product}" size="7"/>

                            </p:column>
                            <p:column style="width : 90px"  rendered="#{userManagedBean.type != 'Sales'}" >
                                <f:facet name="header">
                                    <h:outputText value="Vendor"/>
                                </f:facet>
                                <p:selectOneMenu id="vendor" value="#{item.idVendor}" converter="vendorConverter" panelStyle="width:220px;"
                                                 effect="fade" var="t" style="width:115px" filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="#{maximusBundle.SelectOneMessage}" itemValue=""/>
                                    <f:selectItems value="#{editQuoteController.vendorList}" 
                                                   var="vendor" 
                                                   itemLabel="#{vendor.companyName}" 
                                                   itemValue="#{vendor}" />
<!--                                    <p:column style="width:10%">
                                        <h:outputText styleClass="ui-theme ui-theme-#{t.companyName}" />
                                    </p:column>-->
                                    <p:column>
                                        <h:outputText value="#{t.companyName}" />
                                    </p:column>
                                </p:selectOneMenu>

                            </p:column>

                            <p:columnGroup type="footer" rendered="#{editQuoteController.includeShipping== maximusBundle.Yes_separate and userManagedBean.type != 'Sales'}">
                                <p:row>
                                    <p:column colspan="9" footerText="#{maximusBundle.shipping_cost_label} $" style="text-align:right"/>
                                    <p:column footerText="#{editQuoteController.quote.shipping_cost}" >
                                        <f:facet name="footer">
                                            <p:inputText converter="javax.faces.Double" converterMessage="#{maximusBundlemessage_only_numbers}" value="#{editQuoteController.quote.shipping_cost}" required="true" requiredMessage="#{maximusBundle.message_shipping_cost}" size="7"/>
                                        </f:facet>
                                    </p:column>
                                </p:row>
                            </p:columnGroup>
                            <p:column style="width : 70px">
                                <f:facet name="header">
                                    <h:outputText value="action"/>
                                </f:facet>
                                <div>
                                    <p:commandLink id="buttonRemovePart" 
                                                   value="#{maximusBundle.remove_button}" 
                                                   actionListener="#{editQuoteController.removePart(item)}" 
                                                   ajax="true" update=":form:datalistProduct" 
                                                   process="@this" />
                                </div>
                                <div>
                                    <p:commandLink id="btnReplace" 
                                                   value="#{maximusBundle.replaceButton}"
                                                   oncomplete="PF('dialogSubstitute').show()" 
                                                   ajax="true"
                                                   actionListener="#{editQuoteController.fillPartReplace(item)}"
                                                   update=":formDialogSubstitute:panelPrincipalSubstitute" 
                                                   rendered="#{(userManagedBean.type != 'Sales') and (item.observation == null)}"
                                                   process="@this"/>   
                                </div>
                                <div>
                                    <p:commandLink id="btnChange" 
                                                   value="#{maximusBundle.processButton}"
                                                   oncomplete="PF('dialogProccessGeneric').show()" 
                                                   ajax="true"
                                                   actionListener="#{editQuoteController.fillPartGeneric(item)}"
                                                   rendered="#{(userManagedBean.type != 'Sales') and (item.observation != null)}"
                                                   process="@this"/> 
                                </div>
                            </p:column>
                        </p:dataTable>
                        <p:spacer />
                        <p:separator />
                        <p:spacer />
                        <h:panelGrid width="100%" style="text-align: left;">
                            <h:panelGrid style="background-color: #C2C7C1; width: 100%;">
                                <h:outputText value="#{maximusBundle.ViewProductTitle_notes}" rendered="#{viewQuoteController.quoteListNote != null and viewQuoteController.quoteListNote.size() > 0}" style="font-size: 16px ; font-weight: bold;" />
                            </h:panelGrid>
                            <p:dataList
                                value="#{editQuoteController.quoteListNote}" 
                                var="nota" 
                                type="definition"
                                rendered="#{editQuoteController.quoteListNote.size() > 0}"
                                >

                                <p:panelGrid  style="margin: 15px 15px 15px 15px; width: 90%; border: none !important;"  >

                                    <p:row>
                                        <p:column style="width: 2%; text-align: center; vertical-align: middle;" rowspan="3">
                                            <img src="/Maximus/faces/resources/images/user_image.png" alt="User" />
                                        </p:column>
                                        <p:column style="width: 26%;">
                                            <div style="position: relative; top: -10px; vertical-align: middle; ">
                                                <div style="position: absolute;"> <h:outputText  value="#{nota.idAgent.name}, #{nota.idAgent.lastName}" /> </div>
                                                <h:panelGroup rendered="#{nota.idAgent.type == 'Sales'}">   
                                                    <div  style="background-color: #039BE5; color: white; position: absolute; left: 130px; padding: 0; top: 0; width: 100px; text-align: center; border-radius: 15px;">
                                                        <h:outputText  value="#{nota.idAgent.type}"  />

                                                    </div>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{nota.idAgent.type == 'Purchasing'}" > 
                                                    <div  style="background-color: #FF2020; color: white; position: absolute; left: 130px; padding: 0; top: 0; width: 100px; text-align: center; border-radius: 15px;">

                                                        <h:outputText  value="#{nota.idAgent.type}" />
                                                    </div>
                                                </h:panelGroup> 
                                                <h:panelGroup rendered="#{nota.idAgent.type == 'Administrator'}" > 
                                                    <div  style="background-color: #34A852; color: white; position: absolute; left: 130px; padding: 0; top: 0; width: 100px; text-align: center; border-radius: 15px;">

                                                        <h:outputText  value="#{nota.idAgent.type}" />
                                                    </div>
                                                </h:panelGroup>  
                                            </div>
                                        </p:column>

                                        <p:column style=" width: 15%;">
                                            <h:outputText  value="#{nota.creationDate}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
                                            </h:outputText>
                                        </p:column>

                                    </p:row> 
                                    <p:row>
                                        <p:column  colspan="2">
                                            <blockquote>
                                                <h:outputText escape="false"
                                                              value="#{nota.note}"/>
                                            </blockquote>
                                        </p:column>

                                    </p:row>
                                </p:panelGrid>
                            </p:dataList>
                            <p:commandLink value="Add nota"
                                           ajax="true"
                                           style="color:#0088CC;"
                                           actionListener="#{editQuoteController.showTextArea()}"
                                           update=":form:panelTextArea"
                                           process="@this"
                                           >
                            </p:commandLink>
                            <h:panelGrid width="100%" style="text-align: left; display: none;" id="panelTextArea">
                                <h:outputText value="#{maximusBundle.note_label}"  />
                                <p:inputTextarea value="#{editQuoteController.note}"   style="width:690px; margin-left: 10px;"/>
                            </h:panelGrid>
                        </h:panelGrid>
                    </p:outputPanel>
                </p:panel>

                <p:commandButton value="#{maximusBundle.Cancel}" action="#{editQuoteController.typeAgent()}" id="buttonCancel" ajax="true" process="@this" />
                <p:commandButton value="#{maximusBundle.Save}" action="#{editQuoteController.editRequest('save')}" id="buttonEdit" ajax="false"/>
                <p:commandButton value="#{maximusBundle.Done}" action="#{editQuoteController.editRequest('done')}" id="buttonDone" rendered="#{userManagedBean.type != 'Sales'}">

                    <p:confirm header="#{maximusBundle.ConfirmationHeader}" message="#{maximusBundle.ConfirmDoneQuoteMessage}" icon="ui-icon-alert"/>
                </p:commandButton>

                <ui:include src="/WEB-INF/include/admin/confirmation.xhtml"/>
            </h:form>
            <p:dialog header="Basic Dialog"  widgetVar="dialogPart"  id="dialogPart" resizable="false" draggable="true"  maximizable="true" modal="true" position="center" width="100%" height="100%">

                <h:form
                    id="formDialog">
                    <p:panel  id="panelPrincipal">
                        <p:messages id="messagesDialog" showDetail="true" autoUpdate="true" closable="true"/>

                        <p:panel header="Search Part" id="panelSearch">

                            <h:panelGrid columns="2" style="text-align: left"> 

                                <h:outputText value="#{maximusBundle.CreateHasTitle_hasPK_partNumber}" />
                                <p:autoComplete id="acSimple" value="#{editQuoteController.nroPart}" 
                                                completeMethod="#{editQuoteController.complete}"
                                                var="part" 
                                                converter="productConverter"
                                                itemLabel="#{part.partNumber}"
                                                itemValue="#{part}"
                                                maxResults="10"/>
                                <h:outputText value="#{maximusBundle.CreateProductTitle_manufacture}" />
                                <p:inputText value="#{editQuoteController.manufacturePart}"  />

                                <h:outputText value="#{maximusBundle.CreateProductTitle_description}" />
                                <p:inputText value="#{editQuoteController.descriptionPart}" />


                                <h:outputText value="#{maximusBundle.CreateProductTitle_type}" />
                                <p:inputText value="#{editQuoteController.typePart}"  />


                            </h:panelGrid>

                        </p:panel>

                        <p:outputPanel style="text-align: left; width: 100%">
                            <p:commandButton value="#{maximusBundle.search}" actionListener="#{editQuoteController.searchPart()}" update=":formDialog:panelPrincipal" oncomplete="PF('dialogPart').initPosition()" />

                            <p:commandButton value="#{maximusBundle.reset_button}" ajax="true" action="#{editQuoteController.reset()}" update=":formDialog:panelPrincipal" />

                        </p:outputPanel> 

                        <p:spacer />

                        <p:outputPanel  rendered="#{editQuoteController.partList != null}">
                            <p:separator/>
                            <p:dataTable id="datalistPart"
                                         var="item"
                                         value="#{editQuoteController.partList}"
                                         rows="10"
                                         paginator="true"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15"
                                         emptyMessage="#{maximusBundle.no_search_result}"
                                         paginatorPosition="bottom"
                                         selection="#{editQuoteController.selectedPart}"
                                         rowKey="#{item.partNumber}"
                                         scrollable="true"
                                         scrollHeight="300"
                                         >

                                <p:column selectionMode="multiple" style="width:10px;text-align:center"/>
                                <p:column  style="width :90px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateHasTitle_hasPK_partNumber}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.partNumber}"/>

                                </p:column>

                                <p:column  style="width : 90px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateProductTitle_manufacture}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.manufacture}"/>
                                </p:column>

                                <p:column style="width : 140px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateProductTitle_description}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.description}"/>
                                </p:column>

                                <p:column  style="width : 85px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateProductTitle_type}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.type}"/>
                                </p:column>

                                <p:column  style="width : 140px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateProductTitle_notes}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.notes}"/>
                                </p:column>

                                <p:column style="width : 85px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateProductTitle_retailPrice}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.retailPrice}">
                                        <f:convertNumber pattern="¤#,##0.00" currencySymbol="$" />
                                    </h:outputText>
                                </p:column>

                                <p:column style="width : 120px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateProductTitle_wholesalePrice}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.wholesalePrice}">  
                                        <f:convertNumber pattern="¤#,##0.00" currencySymbol="$" type="currency"/>
                                    </h:outputText>
                                </p:column>

                                <p:column style="width : 80px">
                                    <f:facet name="header">
                                        <h:outputText value="#{maximusBundle.CreateProductTitle_price}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.price}">
                                        <f:convertNumber pattern="¤#,##0.00" currencySymbol="$" type="currency"/>
                                    </h:outputText>
                                </p:column>

                            </p:dataTable>

                            <p:separator/>


                        </p:outputPanel>
                    </p:panel>
                    <p:outputPanel style="text-align: left; width: 100%" id="panelButton">

                        <p:commandButton value="#{maximusBundle.Cancel}"  ajax="false" oncomplete="PF('dialogPart').hide()" update=":form:datalistProduct" actionListener="#{editQuoteController.inicializedObject()}"/>
                        <p:commandButton value="#{maximusBundle.add}" id="buttonAdd" ajax="true" action="#{editQuoteController.addPart()}"  update=":form,:formDialog" oncomplete="PF('dialogPart').initPosition()" />
                    </p:outputPanel> 
                </h:form>
            </p:dialog>

            <p:dialog header="Generic Product"  widgetVar="dialogProccessGeneric"  id="dialogProccessGeneric" resizable="false"   modal="true" position="center" width="300px" height="50%">
                <h:form >
                    <h:panelGrid columns="1" style="text-align: center; vertical-align: middle; width: 100%">
                        <h:outputText value="#{maximusBundle.message_process_product_generic}" />
                        <h:panelGrid columns="2" style="text-align: center; vertical-align: middle; width: 100%;">
                            <p:commandButton value="#{maximusBundle.search_part}"  id="buttonSearch" onclick="PF('dialogPartReplace').show()" ajax="true" oncomplete="#{editQuoteController.reset()}"/>
                            <p:commandButton value="#{maximusBundle.enter_new_part_button}"  id="buttonNewPart"  update=":ProductCreateForm" actionListener="#{editQuoteController.fillDescriptionGeneric()}" oncomplete="PF('ProductCreateDialog').show()">

                            </p:commandButton>
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog header="Confirm"  widgetVar="dialogPartConfirm"  id="dialogPartConfirm" resizable="false"  modal="true" position="center" width="300px" height="50%">
                <h:form >
                    <h:panelGrid columns="1" style="text-align: center; vertical-align: middle; width: 100%;">
                        <h:outputText value="#{maximusBundle.message_replace_product_generic}" />
                        <h:panelGrid columns="2" style="text-align: center; vertical-align: middle; width: 100%;">
                            <p:commandButton value="#{maximusBundle.accept}"  action="#{editQuoteController.sustituirProduct('sustituir')}" ajax="true" update=":form:datalistProduct" oncomplete="PF('dialogPartConfirm').hide(); PF('dialogPart').hide(); PF('dialogProccessGeneric').hide();PF('dialogPartReplace').hide();"/>
                            <p:commandButton value="#{maximusBundle.Cancel}"    oncomplete="PF('dialogPartConfirm').hide(); " update=":form:datalistProduct"/>
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog header="Confirm"  widgetVar="dialogPartConfirmCreate"  id="dialogPartConfirmCreate" resizable="false"  modal="true" position="center" width="300px" height="50%">
                <h:form >
                    <h:panelGrid columns="1" style="text-align: center; vertical-align: middle; width: 100%;">
                        <h:outputText value="#{maximusBundle.message_product_created}" style="font-weight: bold;" />
                        <h:outputText value="#{maximusBundle.message_replace_generic_created}" />
                        <h:panelGrid columns="2" style="text-align: center; vertical-align: middle; width: 100%;">
                            <p:commandButton value="#{maximusBundle.accept}"  action="#{editQuoteController.sustituirProduct('crear')}" ajax="true" update=":form:datalistProduct" oncomplete="PF('dialogPart').hide(); PF('dialogProccessGeneric').hide(); PF('dialogPartConfirmCreate').hide(); PF('ProductCreateDialog').hide();"/>
                            <p:commandButton value="#{maximusBundle.Cancel}"    oncomplete="PF('dialogPartConfirmCreate').hide(); PF('ProductCreateDialog').hide(); PF('dialogProccessGeneric').hide();" update=":form:datalistProduct" actionListener="#{editQuoteController.inicializedObject()}"/>
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog header="Confirm"  widgetVar="dialogPartConfirmCreateSubstitute"  id="dialogPartConfirmCreateSubstitute" resizable="false"  modal="true" position="center" width="300px" height="50%">
                <h:form >
                    <h:panelGrid columns="1" style="text-align: center; vertical-align: middle; width: 100%;">
                        <h:outputText value="#{maximusBundle.message_product_created}" style="font-weight: bold;" />
                        <h:outputText value="#{maximusBundle.message_replace_created}" />
                        <h:panelGrid columns="2" style="text-align: center; vertical-align: middle; width: 100%;">
                            <p:commandButton value="#{maximusBundle.accept}"  action="#{editQuoteController.sustituirProduct('crear')}" ajax="true" update=":form:datalistProduct" oncomplete="PF('dialogPartConfirmCreateSubstitute').hide(); PF('ProductCreateDialog').hide(); PF('dialogSubstitute').hide();"/>
                            <p:commandButton value="#{maximusBundle.Cancel}"    oncomplete="PF('dialogPartConfirmCreateSubstitute').hide(); PF('ProductCreateDialog').hide();" update=":form, :formDialogSubstitute" actionListener="#{editQuoteController.inicializedObject()}"/>
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="ProductCreateDlg" widgetVar="ProductCreateDialog" modal="true" resizable="false" appendTo="@(body)" header="#{maximusBundle.CreateProductTitle}" closeOnEscape="true">

                <h:form id="ProductCreateForm" >
                    <!--                    <p:messages  showDetail="true" autoUpdate="true" closable="true"/>-->
                    <p:panelGrid columns="2" columnClasses="column">

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_partNumber}" for="partNumber" />
                        <h:panelGroup>
                            <p:inputText id="partNumber" value="#{editQuoteController.proController.selected.partNumber}" title="#{maximusBundle.CreateProductTitle_partNumber}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_partNumber}" size="40" maxlength="40"/>
                            <p:tooltip for="partNumber" value="#{editQuoteController.proController.getComponentMessages('partNumber', maximusBundle.CreateProductHelpText_partNumber)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_manufacture}" for="manufacture" />
                        <h:panelGroup>
                            <p:inputText id="manufacture" value="#{editQuoteController.proController.selected.manufacture}" title="#{maximusBundle.CreateProductTitle_manufacture}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_manufacture}" size="40" maxlength="40"/>
                            <p:tooltip for="manufacture" value="#{editQuoteController.proController.getComponentMessages('manufacture', maximusBundle.CreateProductHelpText_manufacture)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_description}" for="description" />
                        <h:panelGroup>
                            <p:inputTextarea id="description" value="#{editQuoteController.proController.selected.description}" title="#{maximusBundle.CreateProductTitle_description}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_description}" style="width: 308px" maxlength="100"/>
                            <p:tooltip for="description" value="#{editQuoteController.proController.getComponentMessages('description', maximusBundle.CreateProductHelpText_description)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_type}" for="type" />
                        <h:panelGroup>
                            <p:inputText id="type" value="#{editQuoteController.proController.selected.type}" title="#{maximusBundle.CreateProductTitle_type}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_type}" size="40" maxlength="40"/>
                            <p:tooltip for="type" value="#{editQuoteController.proController.getComponentMessages('type', maximusBundle.CreateProductHelpText_type)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_notes}" for="notes" />
                        <h:panelGroup>
                            <p:inputTextarea id="notes" value="#{editQuoteController.proController.selected.notes}" title="#{maximusBundle.CreateProductTitle_notes}" style="width: 308px" maxlength="100"/>
                            <p:tooltip for="notes" value="#{editQuoteController.proController.getComponentMessages('notes', maximusBundle.CreateProductHelpText_notes)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_retailPrice}" for="retailPrice" />
                        <h:panelGroup>
                            <p:inputText id="retailPrice" value="#{editQuoteController.proController.selected.retailPrice}" title="#{maximusBundle.CreateProductTitle_retailPrice}" size="40" maxlength="40"/>
                            <p:tooltip for="retailPrice" value="#{editQuoteController.proController.getComponentMessages('retailPrice', maximusBundle.CreateProductHelpText_retailPrice)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_wholesalePrice}" for="wholesalePrice" />
                        <h:panelGroup>
                            <p:inputText id="wholesalePrice" value="#{editQuoteController.proController.selected.wholesalePrice}" title="#{maximusBundle.CreateProductTitle_wholesalePrice}" size="40" maxlength="40"/>
                            <p:tooltip for="wholesalePrice" value="#{editQuoteController.proController.getComponentMessages('wholesalePrice', maximusBundle.CreateProductHelpText_wholesalePrice)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_price}" for="price" />
                        <h:panelGroup>
                            <p:inputText id="price" value="#{editQuoteController.proController.selected.price}" title="#{maximusBundle.CreateProductTitle_price}" size="40" maxlength="40"/>
                            <p:tooltip for="price" value="#{editQuoteController.proController.getComponentMessages('price', maximusBundle.CreateProductHelpText_price)}"/>
                        </h:panelGroup>
                    </p:panelGrid>
                    <p:commandButton actionListener="#{editQuoteController.crearProductSustitute(editQuoteController.productGeneric != null)}" value="#{maximusBundle.Save}" ajax="true" update=":ProductCreateForm"/>

                    <p:commandButton value="#{maximusBundle.Cancel}" oncomplete="PF('ProductCreateDialog').hide(), PF('dialogProccessGeneric').hide()"  process="@this" immediate="true" resetValues="true" />

                </h:form>

            </p:dialog>

            <p:dialog header="Success"  widgetVar="dialogSuccess"  id="dialogSuccess" resizable="false"  modal="true" position="center" width="300px" height="50%">
                <h:form >
                    <h:panelGrid columns="1" style="text-align: center; vertical-align: middle; width: 100%;">
                        <h:outputText value="#{maximusBundle.message_send_mail_success}" style="font-weight: bold;" />
                        <h:panelGrid columns="2" style="text-align: center; vertical-align: middle; width: 100%;">
                            <p:commandButton value="#{maximusBundle.accept}" ajax="true" action="#{editQuoteController.typeAgent()}" oncomplete="PF('dialogSuccess').hide();"/>

                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>


            <ui:include src="/util/DialogSustituteForm.xhtml"/> 
            <ui:include src="/util/DialogReplace.xhtml"/> 
        </ui:define>

    </ui:composition>

</html>