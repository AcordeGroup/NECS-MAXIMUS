<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="ProductCreateDlg" widgetVar="ProductCreateDialog" modal="true" resizable="false" appendTo="@(body)" header="#{maximusBundle.CreateProductTitle}" closeOnEscape="true" style="max-height:95%;overflow:auto">

            <h:form id="ProductCreateForm">

                <h:panelGroup id="display" rendered="#{productController.selected != null}" style="text-align: left">
                    <p:panelGrid columns="2" columnClasses="column" id="productBase">

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_partNumber}" for="partNumber" />
                        <h:panelGroup>
                            <p:inputText id="partNumber" value="#{productController.selected.partNumber}" title="#{maximusBundle.CreateProductTitle_partNumber}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_partNumber}" size="40" maxlength="40">
                                <p:ajax event="blur" update="messageExisting" listener="#{productController.validProductExist(productController.selected.partNumber, false)}" process="@this" ignoreAutoUpdate="true" />
                            </p:inputText>
                            <h:outputText id="messageExisting" value="Existing product number" style="display: none; color: red; font-size: 10px;"/>
                            <p:tooltip for="partNumber" value="#{productController.getComponentMessages('partNumber', maximusBundle.CreateProductHelpText_partNumber)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_manufacture}" for="manufacture" />
                        <h:panelGroup>
                            <p:inputText id="manufacture" value="#{productController.selected.manufacture}" title="#{maximusBundle.CreateProductTitle_manufacture}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_manufacture}" size="40" maxlength="40"/>
                            <p:tooltip for="manufacture" value="#{productController.getComponentMessages('manufacture', maximusBundle.CreateProductHelpText_manufacture)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_description}" for="description" />
                        <h:panelGroup>
                            <p:inputTextarea id="description" value="#{productController.selected.description}" title="#{maximusBundle.CreateProductTitle_description}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_description}" style="width: 308px" maxlength="100"/>
                            <p:tooltip for="description" value="#{productController.getComponentMessages('description', maximusBundle.CreateProductHelpText_description)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_type}" for="type" />
                        <h:panelGroup>
                            <p:inputText id="type" value="#{productController.selected.type}" title="#{maximusBundle.CreateProductTitle_type}" required="true" requiredMessage="#{maximusBundle.CreateProductRequiredMessage_type}" size="40" maxlength="40"/>
                            <p:tooltip for="type" value="#{productController.getComponentMessages('type', maximusBundle.CreateProductHelpText_type)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_notes}" for="notes" />
                        <h:panelGroup>
                            <p:inputTextarea id="notes" value="#{productController.selected.notes}" title="#{maximusBundle.CreateProductTitle_notes}" style="width: 308px" maxlength="100"/>
                            <p:tooltip for="notes" value="#{productController.getComponentMessages('notes', maximusBundle.CreateProductHelpText_notes)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_retailPrice}" for="retailPrice" />
                        <h:panelGroup>
                            <p:inputText id="retailPrice" value="#{productController.selected.retailPrice}" title="#{maximusBundle.CreateProductTitle_retailPrice}" size="40" maxlength="40"/>
                            <p:tooltip for="retailPrice" value="#{productController.getComponentMessages('retailPrice', maximusBundle.CreateProductHelpText_retailPrice)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_wholesalePrice}" for="wholesalePrice" />
                        <h:panelGroup>
                            <p:inputText id="wholesalePrice" value="#{productController.selected.wholesalePrice}" title="#{maximusBundle.CreateProductTitle_wholesalePrice}" size="40" maxlength="40"/>
                            <p:tooltip for="wholesalePrice" value="#{productController.getComponentMessages('wholesalePrice', maximusBundle.CreateProductHelpText_wholesalePrice)}"/>
                        </h:panelGroup>

                        <p:outputLabel value="#{maximusBundle.CreateProductLabel_price}" for="price" />
                        <h:panelGroup>
                            <p:inputText id="price" value="#{productController.selected.price}" title="#{maximusBundle.CreateProductTitle_price}" size="40" maxlength="40"/>
                            <p:tooltip for="price" value="#{productController.getComponentMessages('price', maximusBundle.CreateProductHelpText_price)}"/>
                        </h:panelGroup>
                    </p:panelGrid>
                    <p:outputPanel autoUpdate="true">
                        <h:panelGrid width="100%" style="text-align: left; padding: 10px 0px 0px 0px;" id="panelSubstitutes" rendered="#{productController.productSubstituteList != null and productController.productSubstituteList.size() > 0}">
                            <h:panelGrid style="background-color: #C2C7C1; width: 100%;">
                                <h:outputText value="#{maximusBundle.partNumber_subs}"  style="font-size: 16px ; font-weight: bold;" />
                            </h:panelGrid>
                            <p:dataList
                                value="#{productController.productSubstituteList}" 
                                var="substitutes" 
                                type="definition">
                                <p:panelGrid  style="width: 100%; border: none !important;"  >
                                    <p:row>
                                        <p:column style="width: 80%;" >
                                            <blockquote>
                                                <h:outputText escape="false" value="#{substitutes.partNumber}"/>
                                            </blockquote>
                                        </p:column>
                                        <p:column style="width: 20%;">
                                            <p:commandLink value="Remove" 
                                                           actionListener="#{productController.deletePartSubstitute(substitutes)}"
                                                           ajax="true"
                                                           style="color:#0088CC;">
                                            </p:commandLink>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:dataList>
                        </h:panelGrid>
                    </p:outputPanel>

                    <!--                    <p:spacer />
                                        <p:separator />
                                        <p:spacer />
                                        <p:panel id="basic" header="{maximusBundle.CreateProductLabel_partNumber_subs}" rendered="{productController.createSubstitute}" style="margin-bottom:20px; text-align: left;" >
                                            <h:panelGroup >
                                                <p:panelGrid columns="2" columnClasses="column" >
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_partNumber}" for="partNumberSub" />
                                                    <h:panelGroup>
                                                        <p:inputText id="partNumberSub" value="{productController.productSubstitute.partNumber}" title="{maximusBundle.CreateProductTitle_partNumber}"  size="40" maxlength="40">
                                                            <p:ajax event="blur" update="messageExistingSub" listener="{productController.validProductExist(productController.productSubstitute.partNumber, true)}" process="@this" ignoreAutoUpdate="true"/>
                                                        </p:inputText>
                                                        <h:outputText id="messageExistingSub" value="Existing product number" style="display: none; color: red; font-size: 10px;"/>
                                                        <p:tooltip for="partNumberSub" value="{productController.getComponentMessages('partNumberSub', maximusBundle.CreateProductHelpText_partNumber)}"/>
                                                    </h:panelGroup>
                    
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_manufacture}" for="manufactureSub" />
                                                    <h:panelGroup>
                                                        <p:inputText id="manufactureSub" value="{productController.productSubstitute.manufacture}" title="{maximusBundle.CreateProductTitle_manufacture}"  size="40" maxlength="40"/>
                                                        <p:tooltip for="manufactureSub" value="{productController.getComponentMessages('manufactureSub', maximusBundle.CreateProductHelpText_manufacture)}"/>
                                                    </h:panelGroup>
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_description}" for="descriptionSub" />
                                                    <h:panelGroup>
                                                        <p:inputTextarea id="descriptionSub" value="{productController.productSubstitute.description}" title="{maximusBundle.CreateProductTitle_description}"  style="width: 308px" maxlength="100"/>
                                                        <p:tooltip for="descriptionSub" value="{productController.getComponentMessages('descriptionSub', maximusBundle.CreateProductHelpText_description)}"/>
                                                    </h:panelGroup>
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_type}" for="typeSub" />
                                                    <h:panelGroup>
                                                        <p:inputText id="typeSub" value="{productController.productSubstitute.type}" title="{maximusBundle.CreateProductTitle_type}"  size="40" maxlength="40"/>
                                                        <p:tooltip for="typeSub" value="{productController.getComponentMessages('typeSub', maximusBundle.CreateProductHelpText_type)}"/>
                                                    </h:panelGroup>
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_notes}" for="notesSub" />
                                                    <h:panelGroup>
                                                        <p:inputTextarea id="notesSub" value="{productController.productSubstitute.notes}" title="{maximusBundle.CreateProductTitle_notes}" style="width: 308px" maxlength="100"/>
                                                        <p:tooltip for="notesSub" value="{productController.getComponentMessages('notesSub', maximusBundle.CreateProductHelpText_notes)}"/>
                                                    </h:panelGroup>
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_retailPrice}" for="retailPriceSub" />
                                                    <h:panelGroup>
                                                        <p:inputText id="retailPriceSub" value="{productController.productSubstitute.retailPrice}" title="{maximusBundle.CreateProductTitle_retailPrice}" size="40" maxlength="40"/>
                                                        <p:tooltip for="retailPriceSub" value="{productController.getComponentMessages('retailPriceSub', maximusBundle.CreateProductHelpText_retailPrice)}"/>
                                                    </h:panelGroup>
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_wholesalePrice}" for="wholesalePriceSub" />
                                                    <h:panelGroup>
                                                        <p:inputText id="wholesalePriceSub" value="{productController.productSubstitute.wholesalePrice}" title="{maximusBundle.CreateProductTitle_wholesalePrice}" size="40" maxlength="40"/>
                                                        <p:tooltip for="wholesalePriceSub" value="{productController.getComponentMessages('wholesalePriceSub', maximusBundle.CreateProductHelpText_wholesalePrice)}"/>
                                                    </h:panelGroup>
                    
                                                    <p:outputLabel value="{maximusBundle.CreateProductLabel_price}" for="priceSub" />
                                                    <h:panelGroup>
                                                        <p:inputText id="priceSub" value="{productController.productSubstitute.price}" title="{maximusBundle.CreateProductTitle_price}" size="40" maxlength="40"/>
                                                        <p:tooltip for="priceSub" value="{productController.getComponentMessages('priceSub', maximusBundle.CreateProductHelpText_price)}"/>
                                                    </h:panelGroup>
                                                </p:panelGrid>
                                            </h:panelGroup>
                                        </p:panel>-->
                    <div  style="text-align: center; vertical-align: middle; margin-top: 10px;">
                        <p:commandButton style="margin: 0px 0px 0px 35px !important;" actionListener="#{productController.createProduct(productController.selected.partNumber)}" value="#{maximusBundle.Save}" update="display,#{productController.createPart ? '' : ':ProductListForm:datalist,:growl'}" oncomplete="handleSubmit(xhr,status,args,PF('ProductCreateDialog'));">
                            <p:confirm header="#{maximusBundle.ConfirmationHeader}" message="#{maximusBundle.ConfirmCreateMessage}" icon="ui-icon-alert"/>
                        </p:commandButton>

                        <p:commandButton style="margin: 0 !important;"  value="#{maximusBundle.Cancel}" oncomplete="PF('ProductCreateDialog').hide()" update="display" process="@this" immediate="true" resetValues="true"/>

                        <p:commandLink 
                            id="clickForm"
                            value="#{maximusBundle.add_subs}" 
                            actionListener="#{productController.rederFormSubstitute()}" 
                            process="@this,productBase"
                            update="display"
                            ajax="true"
                            style=" margin-left: 30px;"
                            />
                    </div>
                </h:panelGroup>

            </h:form>

        </p:dialog>
        <ui:include src="/util/DialogSubstitutes.xhtml"/> 
    </ui:composition>

</html>
